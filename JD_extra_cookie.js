/*
 * @Author: abclouds https://github.com/abclouds/jd_scripts
 * @Date: 2021-05-12 00:00:00
 * @Last Modified by: abclouds
 * @Last Modified time: 2021-05-12 00:00:00

 ===================
 ç‰¹åˆ«è¯´æ˜Žï¼š
 1.èŽ·å–å¤šä¸ªäº¬ä¸œcookieçš„è„šæœ¬ï¼Œä¸å’ŒNobyDaçš„äº¬ä¸œcookieå†²çªã€‚æ³¨ï¼šå¦‚ä¸ŽNobyDaçš„äº¬ä¸œcookieé‡å¤ï¼Œå»ºè®®åœ¨BoxJså¤„åˆ é™¤é‡å¤çš„cookie
 ===================
 ===================
 ä½¿ç”¨æ–¹å¼ï¼šåœ¨ä»£ç†è½¯ä»¶é…ç½®å¥½ä¸‹æ–¹é…ç½®åŽï¼Œå¤åˆ¶ https://home.m.jd.com/myJd/newhome.action åˆ°æµè§ˆå™¨æ‰“å¼€ ï¼Œåœ¨ä¸ªäººä¸­å¿ƒè‡ªåŠ¨èŽ·å– cookieï¼Œ
 è‹¥å¼¹å‡ºæˆåŠŸåˆ™æ­£å¸¸ä½¿ç”¨ã€‚å¦åˆ™ç»§ç»­å†æ­¤é¡µé¢ç»§ç»­åˆ·æ–°ä¸€ä¸‹è¯•è¯•ã€‚

 æ³¨ï¼šå»ºè®®é€šè¿‡è„šæœ¬åŽ»èŽ·å–cookieï¼Œè‹¥è¦åœ¨BoxJså¤„æ‰‹åŠ¨ä¿®æ”¹ï¼Œè¯·æŒ‰ç…§JSONæ ¼å¼ä¿®æ”¹ï¼ˆæ³¨ï¼šå¯ä½¿ç”¨æ­¤JSONæ ¡éªŒ https://www.bejson.com/json/formatï¼‰
 ç¤ºä¾‹ï¼š[{"userName":"jd_xxx","cookie":"pt_key=AAJ;pt_pin=jd_xxx;"},{"userName":"jd_66","cookie":"pt_key=AAJ;pt_pin=jd_66;"}]
 ===================
 new Env('èŽ·å–å¤šè´¦å·äº¬ä¸œCookie');//æ­¤å¤„å¿½ç•¥å³å¯ï¼Œä¸ºè‡ªåŠ¨ç”ŸæˆiOSç«¯è½¯ä»¶é…ç½®æ–‡ä»¶æ‰€éœ€
 ===================
 [MITM]
 hostname = me-api.jd.com

 ===================Quantumult X=====================
 [rewrite_local]
 # èŽ·å–å¤šè´¦å·äº¬ä¸œCookie
 https:\/\/me-api\.jd\.com\/user_new\/info\/GetJDUserInfoUnion url script-request-header https://raw.githubusercontent.com/abclouds/jd_scripts/master/JD_extra_cookie.js

 ===================Loon===================
 [Script]
 http-request https:\/\/me-api\.jd\.com\/user_new\/info\/GetJDUserInfoUnion script-path=https://raw.githubusercontent.com/abclouds/jd_scripts/master/JD_extra_cookie.js, tag=èŽ·å–å¤šè´¦å·äº¬ä¸œCookie

 ===================Surge===================
 [Script]
 èŽ·å–å¤šè´¦å·äº¬ä¸œCookie = type=http-request,pattern=^https:\/\/me-api\.jd\.com\/user_new\/info\/GetJDUserInfoUnion,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/abclouds/jd_scripts/master/JD_extra_cookie.js,script-update-interval=0
 */
const _0x542b=['response','PATCH','read','readFileSync','PUT','done','status','env','body','365716OemyKt','url','match','prototype','find','open-url','è¯·æ£€æŸ¥åŒ¹é…URLæˆ–é…ç½®å†…è„šæœ¬ç±»åž‹\x20â€¼ï¸','126481QUtdHm','23767AtDddV','onRequest','ã€è´¦å·ã€‘','statusCode','loadString','node','HEAD','name','1091626LtvLRA','SET\x20','é¦–æ¬¡å†™å…¥äº¬ä¸œ','cookie','bind','undefined','ç”¨æˆ·å:\x20','1629SUbYrh','schedule','747317JzhiJw','initCache','wait','DELETE\x20','.json','info','delete','root.json','request','23127StJeSB','CookieæˆåŠŸ\x20ðŸŽ‰','race','URL:','parse','toLowerCase','362qfEQGu','25WsBoQr','DELETE','7YOWkjk','notify','POST','debug','headers','timeout','method','http','GET','Cookie','2aoWQrF','then','log','persistCache','å†™å…¥äº¬ä¸œCookieå¤±è´¥','openUrl','writeFileSync','READ\x20','error','ã€è´¦å·','æ›´æ–°äº¬ä¸œ','onResponse','cache','push','forEach','onTimeout','\x0aå¤šåª’ä½“:','3wEVAmD','root','valueForKey','OPTIONS','å·²å°è¯•æ¸…ç©ºåŽ†å²Cookie,\x20è¯·é‡è¯•\x20âš ï¸','write','post','indexOf','removeValueForKey','substr','untitled','GetJDUserInfoUnion','stringify','\x0aç‚¹å‡»è·³è½¬:','events','\x0aå†™å…¥äº¬ä¸œCookieå‡ºçŽ°é”™è¯¯\x20â€¼ï¸\x0a','string','function'];const _0x3a4628=_0x42f0;(function(_0x1a2cbe,_0x33a24b){const _0x1ce094=_0x42f0;while(!![]){try{const _0x2f9178=-parseInt(_0x1ce094(0x1b3))+parseInt(_0x1ce094(0x1ab))*-parseInt(_0x1ce094(0x16b))+-parseInt(_0x1ce094(0x188))*-parseInt(_0x1ce094(0x1aa))+parseInt(_0x1ce094(0x177))*parseInt(_0x1ce094(0x1a3))+parseInt(_0x1ce094(0x16a))*parseInt(_0x1ce094(0x1ba))+parseInt(_0x1ce094(0x1bc))+-parseInt(_0x1ce094(0x16d))*parseInt(_0x1ce094(0x164));if(_0x2f9178===_0x33a24b)break;else _0x1a2cbe['push'](_0x1a2cbe['shift']());}catch(_0x589945){_0x1a2cbe['push'](_0x1a2cbe['shift']());}}}(_0x542b,0x92888));const APIKey='CookiesJD';$=new API(APIKey,!![]);const CacheKey='#'+APIKey;if($request)GetCookie();function getCache(){const _0x57fc09=_0x42f0;var _0x38ae3b=$[_0x57fc09(0x19c)](CacheKey)||'[]';return $[_0x57fc09(0x179)](_0x38ae3b),JSON[_0x57fc09(0x168)](_0x38ae3b);}function _0x42f0(_0x2082fe,_0x5e4f30){_0x2082fe=_0x2082fe-0x15c;let _0x542b89=_0x542b[_0x2082fe];return _0x542b89;}function GetCookie(){const _0x578f8e=_0x42f0;try{if($request[_0x578f8e(0x171)]&&$request[_0x578f8e(0x1a4)][_0x578f8e(0x18f)](_0x578f8e(0x193))>-0x1){var _0x1da2e4=$request[_0x578f8e(0x171)][_0x578f8e(0x176)]||$request['headers']['cookie'];if(_0x1da2e4[_0x578f8e(0x1a5)](/(pt_key=.+?pt_pin=|pt_pin=.+?pt_key=)/)){var _0x293dcd=_0x1da2e4['match'](/pt_key=.+?;/)+_0x1da2e4[_0x578f8e(0x1a5)](/pt_pin=.+?;/),_0x255076=_0x293dcd['match'](/pt_pin=([^; ]+)(?=;?)/)[0x1],_0x184d32=decodeURIComponent(_0x255076),_0x1a89f0=getCache(),_0x27087f=[..._0x1a89f0],_0x3e95ee,_0x20a5e8=_0x578f8e(0x1ad),_0x3e1b2a=_0x1a89f0[_0x578f8e(0x1a7)]((_0x5bf51f,_0xde5163)=>{const _0x1fcc0c=_0x578f8e;var _0x58bcab=_0x5bf51f[_0x1fcc0c(0x1b6)],_0x546c4e=_0x58bcab?_0x58bcab[_0x1fcc0c(0x1a5)](/pt_pin=.+?;/)?_0x58bcab['match'](/pt_pin=([^; ]+)(?=;?)/)[0x1]:null:null;const _0x213a8b=_0x255076===_0x546c4e;return _0x213a8b&&(_0x3e95ee=_0xde5163),_0x213a8b;}),_0x55ab0e='';_0x3e1b2a?(_0x27087f[_0x3e95ee][_0x578f8e(0x1b6)]=_0x293dcd,_0x20a5e8=_0x578f8e(0x180)+(_0x3e95ee+0x1)+'ã€‘',_0x55ab0e=_0x578f8e(0x181)):(_0x27087f[_0x578f8e(0x184)]({'userName':_0x184d32,'cookie':_0x293dcd}),_0x20a5e8=_0x578f8e(0x180)+_0x27087f['length']+'ã€‘',_0x55ab0e=_0x578f8e(0x1b5));const _0x2811b=JSON['stringify'](_0x27087f,null,'\x09');$[_0x578f8e(0x18d)](_0x2811b,CacheKey),$['notify'](_0x578f8e(0x1b9)+_0x184d32,'',_0x55ab0e+_0x20a5e8+_0x578f8e(0x165));}else $[_0x578f8e(0x16e)](_0x578f8e(0x17b),'','è¯·æŸ¥çœ‹è„šæœ¬å†…è¯´æ˜Ž,\x20ç™»å½•ç½‘é¡µèŽ·å–\x20â€¼ï¸');$[_0x578f8e(0x19f)]();return;}else $[_0x578f8e(0x16e)](_0x578f8e(0x17b),'',_0x578f8e(0x1a9));}catch(_0x4db10d){$[_0x578f8e(0x18d)]('',CacheKey),$[_0x578f8e(0x16e)]('å†™å…¥äº¬ä¸œCookieå¤±è´¥','',_0x578f8e(0x18c)),console[_0x578f8e(0x179)](_0x578f8e(0x197)+JSON['stringify'](_0x4db10d)+'\x0a\x0a'+_0x4db10d+'\x0a\x0a'+JSON['stringify']($request[_0x578f8e(0x171)])+'\x0a');}$[_0x578f8e(0x19f)]();}function ENV(){const _0x524fdd=_0x42f0,_0x3ba002=typeof $task!==_0x524fdd(0x1b8),_0x1b34eb=typeof $loon!=='undefined',_0x1df46f=typeof $httpClient!=='undefined'&&!_0x1b34eb,_0x2ae78d=typeof require=='function'&&typeof $jsbox!=_0x524fdd(0x1b8),_0x57fa25=typeof require==_0x524fdd(0x199)&&!_0x2ae78d,_0x126f7e=typeof $request!==_0x524fdd(0x1b8),_0x2d0b43=typeof importModule!==_0x524fdd(0x1b8);return{'isQX':_0x3ba002,'isLoon':_0x1b34eb,'isSurge':_0x1df46f,'isNode':_0x57fa25,'isJSBox':_0x2ae78d,'isRequest':_0x126f7e,'isScriptable':_0x2d0b43};}function HTTP(_0x35141f,_0x53a227={}){const _0xb143b2=_0x42f0,{isQX:_0xbb50b7,isLoon:_0x4a16ef,isSurge:_0x4b74f7,isScriptable:_0x16500b,isNode:_0x44887b}=ENV(),_0x55fd01=[_0xb143b2(0x175),_0xb143b2(0x16f),_0xb143b2(0x19e),_0xb143b2(0x16c),_0xb143b2(0x1b1),_0xb143b2(0x18b),_0xb143b2(0x19b)];function _0x22493a(_0x3d1811,_0x28ca05){const _0x383ba6=_0xb143b2;_0x28ca05=typeof _0x28ca05===_0x383ba6(0x198)?{'url':_0x28ca05}:_0x28ca05,_0x28ca05[_0x383ba6(0x1a4)]=_0x35141f?_0x35141f+_0x28ca05['url']:_0x28ca05['url'],_0x28ca05={..._0x53a227,..._0x28ca05};const _0x421c77=_0x28ca05[_0x383ba6(0x172)],_0x3c7f85={...{'onRequest':()=>{},'onResponse':_0xaf2d67=>_0xaf2d67,'onTimeout':()=>{}},..._0x28ca05[_0x383ba6(0x196)]};_0x3c7f85[_0x383ba6(0x1ac)](_0x3d1811,_0x28ca05);let _0x3e195e;if(_0xbb50b7)_0x3e195e=$task['fetch']({'method':_0x3d1811,..._0x28ca05});else{if(_0x4a16ef||_0x4b74f7||_0x44887b)_0x3e195e=new Promise((_0x500960,_0x15da3e)=>{const _0x37cc97=_0x383ba6,_0x296e9f=_0x44887b?require(_0x37cc97(0x163)):$httpClient;_0x296e9f[_0x3d1811[_0x37cc97(0x169)]()](_0x28ca05,(_0x10a96d,_0x5ae418,_0x25e2c0)=>{const _0xc7ae93=_0x37cc97;if(_0x10a96d)_0x15da3e(_0x10a96d);else _0x500960({'statusCode':_0x5ae418[_0xc7ae93(0x1a0)]||_0x5ae418[_0xc7ae93(0x1ae)],'headers':_0x5ae418['headers'],'body':_0x25e2c0});});});else{if(_0x16500b){const _0x212474=new Request(_0x28ca05[_0x383ba6(0x1a4)]);_0x212474[_0x383ba6(0x173)]=_0x3d1811,_0x212474[_0x383ba6(0x171)]=_0x28ca05[_0x383ba6(0x171)],_0x212474[_0x383ba6(0x1a2)]=_0x28ca05[_0x383ba6(0x1a2)],_0x3e195e=new Promise((_0x133bff,_0x47e196)=>{const _0x5ed149=_0x383ba6;_0x212474[_0x5ed149(0x1af)]()[_0x5ed149(0x178)](_0x2ef36d=>{const _0x5aa6cb=_0x5ed149;_0x133bff({'statusCode':_0x212474[_0x5aa6cb(0x19a)][_0x5aa6cb(0x1ae)],'headers':_0x212474['response'][_0x5aa6cb(0x171)],'body':_0x2ef36d});})['catch'](_0x1573b6=>_0x47e196(_0x1573b6));});}}}let _0x23248c;const _0x39a804=_0x421c77?new Promise((_0x102d45,_0x561696)=>{_0x23248c=setTimeout(()=>{const _0x4c4631=_0x42f0;return _0x3c7f85[_0x4c4631(0x186)](),_0x561696(_0x3d1811+_0x4c4631(0x167)+_0x28ca05[_0x4c4631(0x1a4)]+'exceeds\x20the\x20timeout\x20'+_0x421c77+'ms');},_0x421c77);}):null;return(_0x39a804?Promise[_0x383ba6(0x166)]([_0x39a804,_0x3e195e])['then'](_0x273a1d=>{return clearTimeout(_0x23248c),_0x273a1d;}):_0x3e195e)[_0x383ba6(0x178)](_0x1eee9a=>_0x3c7f85[_0x383ba6(0x182)](_0x1eee9a));}const _0x336317={};return _0x55fd01[_0xb143b2(0x185)](_0x2f21c9=>_0x336317[_0x2f21c9['toLowerCase']()]=_0xc9429e=>_0x22493a(_0x2f21c9,_0xc9429e)),_0x336317;}function API(_0x19789f=_0x3a4628(0x192),_0x1178fd=![]){const _0x464349=_0x3a4628,{isQX:_0x2d9035,isLoon:_0x767c56,isSurge:_0x209207,isNode:_0x3a88d0,isJSBox:_0x275f52,isScriptable:_0x2f566f}=ENV();return new class{constructor(_0x320f6b,_0xc43159){const _0x39b6d9=_0x42f0;this[_0x39b6d9(0x1b2)]=_0x320f6b,this[_0x39b6d9(0x170)]=_0xc43159,this[_0x39b6d9(0x174)]=HTTP(),this[_0x39b6d9(0x1a1)]=ENV(),this[_0x39b6d9(0x1b0)]=(()=>{if(_0x3a88d0){const _0xdce51b=require('fs');return{'fs':_0xdce51b};}else return null;})(),this[_0x39b6d9(0x15c)]();const _0x33c173=(_0x40f43a,_0xd3decd)=>new Promise(function(_0xc9d8f8){const _0x1555af=_0x39b6d9;setTimeout(_0xc9d8f8[_0x1555af(0x1b7)](null,_0xd3decd),_0x40f43a);});Promise[_0x39b6d9(0x1a6)]['delay']=function(_0x5b5c50){const _0xd7ea3=_0x39b6d9;return this[_0xd7ea3(0x178)](function(_0x5def21){return _0x33c173(_0x5b5c50,_0x5def21);});};}[_0x464349(0x15c)](){const _0x5b183e=_0x464349;if(_0x2d9035)this[_0x5b183e(0x183)]=JSON[_0x5b183e(0x168)]($prefs[_0x5b183e(0x18a)](this[_0x5b183e(0x1b2)])||'{}');if(_0x767c56||_0x209207)this['cache']=JSON['parse']($persistentStore[_0x5b183e(0x19c)](this[_0x5b183e(0x1b2)])||'{}');if(_0x3a88d0){let _0x4e8651=_0x5b183e(0x162);!this[_0x5b183e(0x1b0)]['fs']['existsSync'](_0x4e8651)&&this['node']['fs'][_0x5b183e(0x17d)](_0x4e8651,JSON[_0x5b183e(0x194)]({}),{'flag':'wx'},_0x465a7a=>console['log'](_0x465a7a)),this[_0x5b183e(0x189)]={},_0x4e8651=this[_0x5b183e(0x1b2)]+_0x5b183e(0x15f),!this['node']['fs']['existsSync'](_0x4e8651)?(this['node']['fs'][_0x5b183e(0x17d)](_0x4e8651,JSON[_0x5b183e(0x194)]({}),{'flag':'wx'},_0x1c2f69=>console[_0x5b183e(0x179)](_0x1c2f69)),this['cache']={}):this['cache']=JSON[_0x5b183e(0x168)](this[_0x5b183e(0x1b0)]['fs'][_0x5b183e(0x19d)](this[_0x5b183e(0x1b2)]+_0x5b183e(0x15f)));}}['persistCache'](){const _0x35e1e1=_0x464349,_0x34e64d=JSON[_0x35e1e1(0x194)](this[_0x35e1e1(0x183)]);if(_0x2d9035)$prefs['setValueForKey'](_0x34e64d,this['name']);if(_0x767c56||_0x209207)$persistentStore[_0x35e1e1(0x18d)](_0x34e64d,this[_0x35e1e1(0x1b2)]);_0x3a88d0&&(this[_0x35e1e1(0x1b0)]['fs'][_0x35e1e1(0x17d)](this[_0x35e1e1(0x1b2)]+'.json',_0x34e64d,{'flag':'w'},_0x293ef7=>console['log'](_0x293ef7)),this[_0x35e1e1(0x1b0)]['fs'][_0x35e1e1(0x17d)](_0x35e1e1(0x162),JSON[_0x35e1e1(0x194)](this[_0x35e1e1(0x189)]),{'flag':'w'},_0xa85af3=>console[_0x35e1e1(0x179)](_0xa85af3)));}['write'](_0x3b13b5,_0x3e1904){const _0xfa4e4=_0x464349;this['log'](_0xfa4e4(0x1b4)+_0x3e1904);if(_0x3e1904[_0xfa4e4(0x18f)]('#')!==-0x1){_0x3e1904=_0x3e1904[_0xfa4e4(0x191)](0x1);if(_0x209207||_0x767c56)return $persistentStore[_0xfa4e4(0x18d)](_0x3b13b5,_0x3e1904);if(_0x2d9035)return $prefs['setValueForKey'](_0x3b13b5,_0x3e1904);_0x3a88d0&&(this[_0xfa4e4(0x189)][_0x3e1904]=_0x3b13b5);}else this['cache'][_0x3e1904]=_0x3b13b5;this[_0xfa4e4(0x17a)]();}['read'](_0x4d112c){const _0x5894d5=_0x464349;this[_0x5894d5(0x179)](_0x5894d5(0x17e)+_0x4d112c);if(_0x4d112c[_0x5894d5(0x18f)]('#')!==-0x1){_0x4d112c=_0x4d112c[_0x5894d5(0x191)](0x1);if(_0x209207||_0x767c56)return $persistentStore[_0x5894d5(0x19c)](_0x4d112c);if(_0x2d9035)return $prefs[_0x5894d5(0x18a)](_0x4d112c);if(_0x3a88d0)return this[_0x5894d5(0x189)][_0x4d112c];}else return this[_0x5894d5(0x183)][_0x4d112c];}[_0x464349(0x161)](_0x9bd90){const _0x52f2a8=_0x464349;this[_0x52f2a8(0x179)](_0x52f2a8(0x15e)+_0x9bd90),_0x9bd90[_0x52f2a8(0x18f)]('#')!==-0x1?(_0x9bd90=_0x9bd90['substr'](0x1),(_0x209207||_0x767c56)&&$persistentStore[_0x52f2a8(0x18d)](null,_0x9bd90),_0x2d9035&&$prefs[_0x52f2a8(0x190)](_0x9bd90),_0x3a88d0&&delete this[_0x52f2a8(0x189)][_0x9bd90]):delete this[_0x52f2a8(0x183)][_0x9bd90],this['persistCache']();}['notify'](_0xabd222,_0x2b0cac='',_0x492284='',_0x117cec={}){const _0x2125b6=_0x464349,_0x2d8ff7=_0x117cec[_0x2125b6(0x1a8)],_0x502128=_0x117cec['media-url'];if(_0x2d9035)$notify(_0xabd222,_0x2b0cac,_0x492284,_0x117cec);_0x209207&&$notification[_0x2125b6(0x18e)](_0xabd222,_0x2b0cac,_0x492284+(''+(_0x502128?'\x0aå¤šåª’ä½“:'+_0x502128:'')),{'url':_0x2d8ff7});if(_0x767c56){let _0x12b471={};if(_0x2d8ff7)_0x12b471[_0x2125b6(0x17c)]=_0x2d8ff7;if(_0x502128)_0x12b471['mediaUrl']=_0x502128;JSON[_0x2125b6(0x194)](_0x12b471)=='{}'?$notification[_0x2125b6(0x18e)](_0xabd222,_0x2b0cac,_0x492284):$notification[_0x2125b6(0x18e)](_0xabd222,_0x2b0cac,_0x492284,_0x12b471);}if(_0x3a88d0||_0x2f566f){const _0xffe9f6=_0x492284+(_0x2d8ff7?_0x2125b6(0x195)+_0x2d8ff7:'')+(_0x502128?_0x2125b6(0x187)+_0x502128:'');if(_0x275f52){const _0x5aad0b=require(_0x2125b6(0x184));_0x5aad0b[_0x2125b6(0x1bb)]({'title':_0xabd222,'body':(_0x2b0cac?_0x2b0cac+'\x0a':'')+_0xffe9f6});}else console[_0x2125b6(0x179)](_0xabd222+'\x0a'+_0x2b0cac+'\x0a'+_0xffe9f6+'\x0a\x0a');}}[_0x464349(0x179)](_0x48d04f){const _0x3266cc=_0x464349;if(this[_0x3266cc(0x170)])console[_0x3266cc(0x179)](_0x48d04f);}[_0x464349(0x160)](_0x1d8329){const _0x5039db=_0x464349;console[_0x5039db(0x179)](_0x1d8329);}[_0x464349(0x17f)](_0x1dc137){const _0x2d606d=_0x464349;console[_0x2d606d(0x179)]('ERROR:\x20'+_0x1dc137);}[_0x464349(0x15d)](_0x1e65cc){return new Promise(_0x2c2b31=>setTimeout(_0x2c2b31,_0x1e65cc));}[_0x464349(0x19f)](_0x4ec025={}){const _0xe2981d=_0x464349;if(_0x2d9035||_0x767c56||_0x209207)$done(_0x4ec025);else _0x3a88d0&&!_0x275f52&&(typeof $context!==_0xe2981d(0x1b8)&&($context['headers']=_0x4ec025[_0xe2981d(0x171)],$context[_0xe2981d(0x1ae)]=_0x4ec025['statusCode'],$context[_0xe2981d(0x1a2)]=_0x4ec025[_0xe2981d(0x1a2)]));}}(_0x19789f,_0x1178fd);}
